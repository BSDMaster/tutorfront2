<!DOCTYPE html>
<!-- saved from url=(0048)http://getbootstrap.com/2.3.2/examples/hero.html -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>Tutor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Le styles -->
  <!--<link href="./library/bootstrap.css" rel="stylesheet">-->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!--Library Table-->
  <script src="./library/bootgrid/jquery.bootgrid.js"></script>
  <script src="./library/bootgrid/jquery.bootgrid.fa.js"></script>
  <link href="./library/bootgrid/jquery.bootgrid.css" rel="stylesheet">

  <!--Library FullCalendar-->
  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.js"></script>
  <link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.print.css" rel="stylesheet">-->

  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.2/moment.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.1.1/fullcalendar.min.js"></script>-->

  <script src="./library/fullCalendar/fullcalendar.js"></script>
  <link href="./library/fullCalendar/fullcalendar.css" rel="stylesheet">
  <link href="./library/fullCalendar/fullcalendar.print.css" rel="stylesheet">


  <link href="./library/bootstrap-responsive.css" rel="stylesheet">
  <!--Override CSS-->
  <!--    <link href="./css/bootstrap.css" rel="stylesheet">-->
  <link href="./css/bootstrap.min.css" rel="stylesheet">
  <link href="./css/style.css" rel="stylesheet">
  <link href="./css/override.css" rel="stylesheet">
  <!--Google Map-->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3CqYZxIposJwTiB-GAGSYBRRHIi0x6_Y&libraries=places&language=th-TH"></script>

  <script>
    //_gUserEmail = 'tutor1@gmail.com';  //bypass login
    _gUserType = 'student';
    _gRec = {
      recId: null,
      recType: null
    };
    _gUser = {
      turId: null,
      turName: null
    };
    _gUser.turId = null;
    _gUser.turName = null;
    _gNoResultFound = 'ไม่พบรายการ';
    _gServiceURL = 'http://localhost:8080/tutormatchingservices-0.0.1-SNAPSHOT/';

  </script>
</head>

<body data-gr-c-s-loaded="true">
  <nav id="divMainNavBar" class="navbar navbar-expand-lg navbar-dark bg-primary" style="display:none;">

    <div class="container-fluid">

      <!--<div class="navbar-header">-->

      <a class="navbar-brand mb-0 h1" href="javascript:loadMainPage();">Tutor</a>
      <!--  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
    </div>-->
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="nav navbar-nav ml-auto">
          <li class="nav-item" id="nav-itm-student-schedule">
            <a class="nav-link" href="javascript:changePage('./html/schedule.html');">ตารางสอน</a>
          </li>
          <li class="nav-item" id="nav-itm-tutor-schedule">
              <a class="nav-link" href="javascript:changePage('./html/schedule.html');">ตารางสอน</a>
            </li>
          <li class="nav-item" id="nav-itm-rate">
            <a class="nav-link" href="javascript:changePage('./html/rate.html');">อัตราค่าเรียน</a>
          </li>
          <li class="nav-item" id="nav-itm-publishJob">
            <a class="nav-link" href="javascript:changePage('./html/publishJob.html');">แก้ไขข้อมูลการรับงานสอน</a>
          </li>
          <li class="nav-item" id="nav-itm-registerClass">
            <a class="nav-link" href="javascript:changePage('./html/registerClass.html');">สมัครเรียนเพิ่มเติม</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="javascript:changePage('./html/contact.html');">ติดต่อเรา</a>
          </li>
          <li class="nav-item dropdown">

            <a id="divShowUser" class="nav-link dropdown-toggle" data-toggle="dropdown">User</a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="javascript:changePage('./html/profile.html');">ข้อมูลส่วนตัว</a>
              <a class="dropdown-item" href="javascript:logout();">ออกจากระบบ</a>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </nav>
  <div id="divMainContainer" class="container">

  </div>
  <!-- /container -->


  <script>

    jQuery(document).ready(function () {
      console.log("ready!");
      if (_gUser.turId == null) {
        jQuery("#divMainContainer").load('./html/login.html');
      }
      else {
        loadMainPage();
      }
    });

    function changePage(page) {
      jQuery("#divMainContainer").load(page);
    }

    function login(email, password, userType) {
      var data = {
        email: email,
        password: password
      }
      //if(_gUserEmail){   //call web service for check user credential

      
      $.ajax({
        type: "POST",
        url: _gServiceURL+"tutor/login",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
        crossDomain: true,
        dataType: "json",
        success: function (data, status, jqXHR) {
          _gUser.turId = data.data.id;
          _gUser.turName = data.data.name;
          console.log(_gUser.turId);
          loadMainPage();
          // alert("Tutor ID : " + data.data.id);
        },

        error: function (jqXHR, status) {
          // error handler
          console.log(jqXHR);
          alert('fail' + status.code);
        }
      });
      

      //testOnly
      if (userType == "tutor") {
        _gUser.turId = 1;
        _gUser.turName = "Tutor1";
      }
      else {
        _gUser.turId = 1;
        _gUser.turName = "Student1";
      }

      loadMainPage();
    }

    function loadMainPage() {
      if (_gUser.turId != null) {
        
        jQuery("#divMainNavBar").css('display', '');
        jQuery("#divShowUser").html(_gUser.turName);

        //_gUserType
        console.log("_gUserType=", _gUserType);
        if (_gUserType == "tutor") {
          jQuery("#divMainContainer").load('./html/main.html');
          jQuery("#nav-itm-student-schedule").hide();
          jQuery("#nav-itm-tutor-schedule").show();
          jQuery("#nav-itm-rate").hide();
          jQuery("#nav-itm-publishJob").show();
          jQuery("#nav-itm-registerClass").hide();
        }
        else {
          jQuery("#divMainContainer").load('./html/mainStudent.html');
          jQuery("#nav-itm-student-schedule").show();
          jQuery("#nav-itm-tutor-schedule").hide();
          jQuery("#nav-itm-rate").show();
          jQuery("#nav-itm-publishJob").hide();
          jQuery("#nav-itm-registerClass").show();
        }
      }
      else {
        console.log("pls check user credential");
      }
    }

    function logout() {
      //_gUserEmail = null;
      jQuery("#divMainContainer").load('./html/login.html');
      jQuery("#divMainNavBar").css('display', 'none');
    }
  </script>

</body>

</html>